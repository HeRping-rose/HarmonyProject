# 六、商品详情模块

# 1. 商品详情

## 1.1. 商品详情搭建

![img](D:\HarmoneyProject\MD\harmony\arkts_lv.md\16-鸿蒙-单模块项目08-AI面试官\1731057722748-8d7a839b-baa5-4370-80e0-d41e52dbbace.png)素材图片



去openHarmoney下载一个sku组件-黑马发布的

- 安装sku-basic

```bash
$ ohpm i @ohmos/sku
// 把第三方的组件变成自己的组件
commons/basic/src/main/ets/components/HDMSku.ets

import { Sku, HmSku, HmSpec } from '@ohmos/sku'

export { Sku as HDMSku, HmSku as HDMSkuType, HmSpec as HDMSpec }
```

- 创建类型文件

```ts
features/home/src/main/ets/viewmodels/goods.ets

import { HDMGoodsItem, HDMSkuType, HDMSpec } from "basic";

// 其他略
export interface GoodsProperty {
  name: string;
  value: string;
}

export interface GoodsDetail {
  pictures: string[];
  properties: GoodsProperty[];
}

export interface Goods extends HDMGoodsItem {
  inventory: number
  mainPictures: string[]
  details: GoodsDetail
  specs: HDMSpec[]
  skus: HDMSkuType[]
}

export interface HmSpecValue {
  name: string
  picture: string | null
  selected: boolean | null
  disabled: boolean | null
}
```

- 类型文件导出

```ts
features/home/src/main/ets/viewmodels/index.ets

export * from './goods'
```

- 分别创建对应的四个组件

![img](https://cdn.nlark.com/yuque/0/2024/png/8435673/1731058287489-3de152f0-8360-439f-97f4-bbcb941475ba.png)

- GoodsComment-评价组件

```ts
features/home/src/main/ets/components/GoodsComment.ets

import { HDMGoodsItem } from "basic"

@ComponentV2
export struct GoodsComment {
  @Param
  goods: HDMGoodsItem = {} as HDMGoodsItem

  build() {
    Column() {
      Row() {
        Text('商品评价')
          .fontSize(13)
          .fontWeight(700)
          .fontColor($r('[basic].color.black'))
          .margin({ right: 8 })
        Text('(100+)')
          .fontSize(13)
          .fontColor($r('[basic].color.gray'))
        Blank()
        Text('查看全部')
          .fontSize(13)
          .fontColor($r('[basic].color.gray'))
        Image($r('[basic].media.ic_public_right'))
          .width(20)
          .aspectRatio(1)
          .fillColor($r('[basic].color.gray'))
      }
      .width('100%')
      .height(40)

      ForEach(new Array(2).fill(0), () => {
        Column({ space: 8 }) {
          Row() {
            Image($r('app.media.goods_avatar'))
              .width(24)
              .aspectRatio(1)
              .margin({ right: 8 })
            Text('匿名用户1259')
              .fontColor($r('[basic].color.black'))
              .fontSize(14)
          }
          .width('100%')

          Row() {
            Text('黑色·公开版·128G')
              .fontColor($r('[basic].color.gray'))
              .fontSize(12)
            Blank()
            Text('昨天23.45')
              .fontColor($r('[basic].color.gray'))
              .fontSize(12)
          }
          .width('100%')

          Text('HUAWEI Pura 70 Ultra 创新性采用超聚光伸缩主摄，搭载1英寸大底传感器、以及1英寸传感器中最大的F1.6物理光圈，带来业界最大的主摄进光量。')
            .fontColor($r('[basic].color.text'))
            .fontSize(13)

          Row({ space: 8 }) {
            ForEach(new Array(3).fill(0), () => {
              Image(this.goods.picture)
                .width(80)
                .aspectRatio(1)
            })
          }
          .width('100%')
        }
        .margin({ top: 16 })
      })
    }
    .backgroundColor($r('[basic].color.white'))
    .borderRadius(8)
    .margin({ left: 8, right: 8, bottom: 8 })
    .padding(8)
  }
}
```

- GoodsDetail-详情

```ts
features/home/src/main/ets/components/GoodsDetail.ets

import { Goods } from '../viewmodels'

@ComponentV2
export struct GoodsDetail {
  @Param goods: Goods = {} as Goods

  build() {
    Column() {
      Row() {
        Text('商品详情')
          .fontSize(13)
          .fontWeight(700)
          .fontColor($r('[basic].color.black'))
          .margin({ left: 16 })
      }
      .width('100%')
      .height(50)

      ForEach(this.goods.details?.pictures, (src: string) => {
        Image(src)
          .width('100%')
      })
    }
    .backgroundColor($r('[basic].color.white'))
    .margin({ bottom: 8 })
  }
}
```

- GoodsInfo

```ts
features/home/src/main/ets/components/GoodsInfo.ets

import { Goods } from "../viewmodels"
import { promptAction } from "@kit.ArkUI"
import { HDMLog } from "basic"

@ComponentV2
export struct GoodsInfo {
  @Param
  goods: Goods = {} as Goods

  build() {
    Column() {
      // 有 多张图片显示轮播图
      if (this.goods.mainPictures && this.goods.mainPictures.length) {
        Swiper() {
          ForEach(this.goods.mainPictures, (src: string, index: number) => {
            Image(src)
              .onClick(() => {

              })
          })
        }
        .cachedCount(5)
        .indicator(Indicator.digit()
          .right(10)
          .bottom(6))
        .width('100%')
        .aspectRatio(1)
      } else {
        Image(this.goods.picture)
      }

      Column() {
        Text() {
          Span('¥ ')
          Span(this.goods.price)
            .fontSize(24)
        }
        .width('100%')
        .fontWeight(500)
        .fontColor($r('[basic].color.black'))
        .margin({ bottom: 8, top: 8 })

        Text(this.goods.name)
          .width('100%')
          .fontColor($r('[basic].color.text'))
          .margin({ bottom: 8 })
        Text(this.goods.desc)
          .fontSize(13)
          .width('100%')
          .fontColor($r('[basic].color.gray'))
          .margin({ bottom: 8 })

        Column() {
          Row({ space: 8 }) {
            Text('商品规格')
              .fontSize(13)
              .fontWeight(500)
              .fontColor($r('[basic].color.black'))
            Text('请选择')
              .fontSize(13)
              .fontColor($r('[basic].color.gray'))
            Blank()
            Image($r('[basic].media.ic_public_right'))
              .width(20)
              .aspectRatio(1)
              .fillColor($r('[basic].color.gray'))
          }
          .width('100%')
          .height(40)
          .onClick(() => {
          })

          Row() {
            Text('无忧退货 · 快速退款 · 免费包邮')
              .fontColor($r('[basic].color.text'))
              .fontSize(13)
            Blank()
            Image($r('[basic].media.ic_public_right'))
              .width(20)
              .aspectRatio(1)
              .fillColor($r('[basic].color.gray'))
          }
          .width('100%')
          .height(40)
          .border({
            width: { top: 0.5 },
            color: $r('[basic].color.under')
          })
        }
      }
      .backgroundColor($r('[basic].color.white'))
      .borderRadius(8)
      .margin(8)
      .padding(8)
    }
  }
}
```

- 在常量添加商品详情地址

```typescript
commons/basic/src/main/ets/constants/PAGE_PATH.ets

export class PAGE_PATH {
  static readonly MAIN_PAGE: string = "main_page"
  static readonly MAIN_PAGE_ID: string = "mainNavigation"
  static readonly SEARCH_PAGE: string = "SearchView" // 搜索页面
  static readonly SEARCH_RESULT_PAGE: string = "SearchResultView" // 搜索结构页面
  static readonly LOGIN_PAGE: string = "LoginView" // 搜索结构页面
  static readonly AI_CUSTOMER_PAGE: string = "AICustomerView" // 搜索结构页面
  static readonly SETTING_PAGE: string = "SettingView" // 设置页面
  static readonly GOODS_PAGE: string = "GoodsView" // 商品详情页面
}
```

- 详情整合页-GoodsView

```ts
features/home/src/main/ets/views/GoodsView.ets

import {
  AppBreakPoint,
  AppSafeArea,
  auth,
  HDMGuessGoods,
  HDMNavBar,
  HDMSku,
  HDMSkuType,
  PAGE_PATH
} from 'basic'
import { Goods } from '../viewmodels'
import { AppStorageV2 } from '@kit.ArkUI'
import { GoodsInfo, GoodsComment, GoodsDetail } from '../components'
import { HMRouter, HMRouterMgr } from '@hadss/hmrouter'


@HMRouter({ pageUrl: PAGE_PATH.GOODS_PAGE })
@ComponentV2
export struct GoodsView {
  breakPointClass: AppBreakPoint = AppStorageV2.connect(AppBreakPoint, () => new AppBreakPoint())!
  safeArea: AppSafeArea = AppStorageV2.connect(AppSafeArea, () => new AppSafeArea())!
  @Local goods: Goods = {} as Goods
  @Local activeIndex: number = 0
  @Local loading: boolean = false
  @Local
  showSheet: boolean = false
  @Local
  sku: HDMSkuType = {} as HDMSkuType
  scroller = new Scroller()
  tabsList: string[] = ["商品", "评价", "详情", "推荐"]

  @Builder
  CustomTitleBuilder() {
    // 楼层切换
    Row() {
      Row({ space: 10 }) {
        ForEach(this.tabsList, (tabName: string, index: number) => {
          Text(tabName)
            .fontColor(this.activeIndex === index ? $r("[basic].color.black") : $r("[basic].color.gray"))
            .onClick(() => {

            })
        })
      }

      Image($r('[basic].media.ic_public_shared'))
        .iconButton()
    }
    .justifyContent(FlexAlign.SpaceBetween)
    .width("100%")
    .height("100%")
    .padding({
      left: 50,
      right: 50
    })

  }

  @Builder
  AddCartBuilder() {
    Column() {
      Text(`已选:`)
        .fontWeight(300)
        .width('100%')
        .fontColor($r('[basic].color.black'))
        .fontSize(14)
        .padding({ bottom: 10, right: 50 })
        .maxLines(1)
        .textOverflow({ overflow: TextOverflow.Ellipsis })
      Row({ space: 10 }) {
        Image(this.goods.mainPictures?.[0])
          .alt($r('app.media.ic_sku_img'))
          .width(80)
          .height(80)
          .backgroundColor($r('[basic].color.under'))
          .borderRadius(4)
        Column() {
          Row() {
            Text('现价¥')
              .fontSize(14)
              .fontColor($r('[basic].color.black'))
              .offset({ y: -4 })
            Text(this.goods.price)
              .fontSize(24)
              .fontColor($r('[basic].color.black'))
              .fontWeight(500)
            Text('原价¥' + this.goods.price)
              .fontSize(12)
              .fontColor($r('[basic].color.gray'))
              .margin({ left: 10 })
              .offset({ y: -4 })
              .decoration({
                type: TextDecorationType.LineThrough,
                color: $r('[basic].color.gray')
              })
          }
          .alignItems(VerticalAlign.Bottom)

          Row({ space: 10 }) {
            // 计数器


            Text('库存充足')
              .fontSize(12)
              .fontColor($r('[basic].color.gray'))
          }
        }
        .height(80)
        .justifyContent(FlexAlign.SpaceBetween)
        .alignItems(HorizontalAlign.Start)
      }
      .width('100%')

      Divider()
        .strokeWidth(4)
        .color($r('[basic].color.under'))
        .margin({ left: -8, right: -8, top: 13 })

      List() {
        ListItem() {
          // Sku 组件

        }
      }
      .layoutWeight(1)
      .scrollBar(BarState.Off)

      Row() {
        Button(this.loading ? '加入中...' : '加入购物袋')
          .buyButton($r('[basic].color.black'), true)
          .onClick(() => {
            // 实现加入购物车

          })
        Button('立即购买')
          .buyButton($r('[basic].color.red'), false)
          .onClick(async () => {

          })
      }
      .width('100%')
    }
    .height(600)
    .padding({
      left: 16,
      right: 16,
      top: 16,
      bottom: this.safeArea.bottomHeight || 16
    })
  }

  aboutToAppear(): void {
    this.goods = HMRouterMgr.getCurrentParam() as Goods

  }

  build() {
    Column() {
      HDMNavBar({
        showRightIcon: true,
        customTitle: () => {

        },
        onLeftClick: () => {
          HMRouterMgr.pop()
        }
      })
      Column() {
        List({ scroller: this.scroller }) {
          ListItem() {
            // 商品信息
            GoodsInfo({ goods: this.goods })
              .geometryTransition(this.goods.id)
          }

          ListItem() {
            // 评论 目前无评论数据
            GoodsComment({ goods: this.goods })
          }

          ListItem() {
            // 商品详情
            GoodsDetail({ goods: this.goods })
          }

          ListItem() {
            // 猜你喜欢
            HDMGuessGoods()
          }
        }
        .onScrollIndex((index) => {
          this.activeIndex = index
        })
        .scrollBar(BarState.Off)
        .width('100%')
        .height('100%')
      }
      .layoutWeight(1)
      .backgroundColor($r('[basic].color.under'))

      Row() {
        Image($r('[basic].media.ic_public_like'))
          .iconButton()
        Image($r('[basic].media.ic_public_comment'))
          .iconButton()
        Badge({
          count: 0,
          style: {},
          position: { x: 30, y: 4 }
        }) {
          Image($r('[basic].media.ic_public_cart'))
            .iconButton()
            .onClick(() => {

            })
        }

        Row() {
          Button('加入购物袋')
            .buyButton($r('[basic].color.black'), true)
            .onClick(() => {
            })
          Button('立即购买')
            .buyButton($r('[basic].color.red'), false)
            .onClick(async () => {

            })
        }
        .layoutWeight(1)
        .padding({ right: 16, left: 6 })
      }
      .height(54)
      .width('100%')
      .margin({ bottom: this.safeArea.topHeight })
    }
    .height('100%')
    .bindSheet($$this.showSheet, this.AddCartBuilder(),
      {
        height: SheetSize.FIT_CONTENT,
        backgroundColor: $r('[basic].color.white'),
        preferType: SheetType.CENTER
      })
   
  }
}

@Extend(Image)
function iconButton() {
  .width(24)
  .aspectRatio(1)
  .margin(13)
  .fillColor($r('[basic].color.black'))
}

@Extend(Button)
function buyButton(color: ResourceStr, isLeft: boolean) {
  .fontSize(14)
  .height(36)
  .type(ButtonType.Normal)
  .layoutWeight(1)
  .backgroundColor(color)
  .borderRadius({
    topLeft: isLeft ? 18 : 0,
    bottomLeft: isLeft ? 18 : 0,
    topRight: isLeft ? 0 : 18,
    bottomRight: isLeft ? 0 : 18
  })
  .pixelRound({
    end: PixelRoundCalcPolicy.FORCE_CEIL,
    start: PixelRoundCalcPolicy.FORCE_FLOOR
  })
}
```

![img](https://cdn.nlark.com/yuque/0/2025/png/8435673/1742398144536-cdada196-2488-40f2-a764-c0d4c1c75d08.png)

- 在HDMGoods跳转

```typescript
commons/basic/src/main/ets/components/HDMGoods.ets

import { HMRouterMgr } from '@hadss/hmrouter'
import { PAGE_PATH } from '../constants'
import { HDMGoodsItem } from '../viewmodels'

@ComponentV2
export struct HDMGoods {
  @Param
  goods: HDMGoodsItem = {} as HDMGoodsItem // 6个字段
  @Param
  smallImage: boolean = false

  build() {
    Column({ space: 10 }) {
      if (this.smallImage) {
        Row() {
          Image(this.goods.picture)
            .alt($r("app.media.empty"))
            .width('100%')
            .aspectRatio(1)
        }
        .width('100%')
        .padding(20)
      } else {
        Image(this.goods.picture)
          .alt($r("app.media.empty"))
          .width('100%')
          .aspectRatio(1)
      }
      Text(this.goods.name)
        .fontSize(14)
        .fontColor($r('app.color.text'))
        .maxLines(2)
        .textOverflow({ overflow: TextOverflow.Ellipsis })
        .width('100%')
        .padding({ left: 10, right: 10 })
      Row({ space: 4 }) {
        Text('¥' + Number(this.goods.price))
          .fontSize(14)
          .fontWeight(FontWeight.Bold)
          .fontColor($r('app.color.black'))
        Text('¥999')
          .fontSize(8)
          .fontColor($r('app.color.gray'))
          .decoration({ type: TextDecorationType.LineThrough, color: $r('app.color.gray') })
        Blank()
        Text('2.9万+人付款')
          .fontSize(10)
          .fontColor($r('app.color.gray'))
      }
      .alignItems(VerticalAlign.Bottom)
      .width('100%')
      .margin({ bottom: 10 })
      .padding({ left: 10, right: 10 })
    }
    .width('100%')
    .backgroundColor($r('app.color.white'))
    .borderRadius(8)
    .clip(true)
    .geometryTransition(this.goods.id)
    .onClick(() => {
      HMRouterMgr.push({
        pageUrl: PAGE_PATH.GOODS_PAGE,
        param: this.goods
      })
    })
  }
}
```





## 1.2. 数据获取

![img](https://cdn.nlark.com/yuque/0/2024/png/639379/1718085559005-3cc2185e-7d51-4c72-91f1-ff625bd18e9e.png)![img](https://cdn.nlark.com/yuque/0/2024/png/639379/1718085616620-08a0bf74-514b-43c3-a8f7-cefa97080157.png?x-oss-process=image%2Fcrop%2Cx_0%2Cy_112%2Cw_738%2Ch_1172)

**需求：**

1. 获取数据，并渲染到页面

**核心步骤：**

1. 页面跳转携带数据
2. 抽取 api
3. 设置数据给状态变量

```ts
features/home/src/main/ets/api/home.ets
// 获取商品详情

export const getGoodsDetailAPI = (params: GoodsParams) => {
  return RequestRcp.get<Goods>("/goods", params)
}
```

- 定义数据类型

```ts
features/home/src/main/ets/viewmodels/goods.ets

export interface GoodsParams {
  id: string
}
```

- 初始化时获取

```ts
features/home/src/main/ets/views/GoodsView.ets

aboutToAppear(): void {
    this.goods = HMRouterMgr.getCurrentParam() as Goods
    // this.goods.id
    this.getGoodsDetail()
  }

  async getGoodsDetail() {
    this.goods = await getGoodsDetailAPI({ id: this.goods.id })
  }
```

## 

## 1.3. 整合 Loading 

![img](https://cdn.nlark.com/yuque/0/2025/png/38706227/1747642978946-563af2da-3158-4bf1-9ff6-3981bb635a72.png)

git 记录

Detail-整合 Loading 弹窗

## 1.4. 锚点定位功能

需求：

1. 点击锚点--》内容滚动
2. 内容滚动--》锚点切换

确认内容使用的组件再分析：

![img](https://cdn.nlark.com/yuque/0/2024/png/639379/1718122835210-b06a10ea-f397-4f25-b441-543f80d89745.png?x-oss-process=image%2Fcrop%2Cx_0%2Cy_0%2Cw_744%2Ch_1302)

**核心步骤：**

1. 实现锚点布局效果

1. 1. 定义数据
   2. 添加 Tabs
   3. 自定义 tabBar 实现高亮切换

1. 联动：

1. 1. 锚点点击，控制 List 滚动
   2. List 滚动，同步控制锚点

**参考代码：**

```ts
features/home/src/main/ets/views/GoodsView.ets

@Builder
  CustomTitleBuilder() {
    // 楼层切换
    Row() {
      Row({ space: 10 }) {
        Repeat<string>(this.tabsList).each((obj: RepeatItem<string>) => {
          Text(obj.item)
            .fontColor(this.activeIndex === obj.index ? $r("[basic].color.black") : $r("[basic].color.gray"))
            .onClick(() => {
              this.activeIndex = obj.index // 0 -> 第一个
              this.scroller.scrollToIndex(obj.index)
            })
        })
      }

      Image($r('[basic].media.ic_public_shared'))
        .iconButton()
    }
    .justifyContent(FlexAlign.SpaceBetween)
    .width("100%")
    .height("100%")
    .padding({
      left: 50,
      right: 50
    })

  }
```



- 实现传入

```ts
 features/home/src/main/ets/views/GoodsView.ets

 HDMNavBar({
        title: '',
        showRightIcon: true,
        customTitle: () => {
          this.CustomTitleBuilder()
        },
        onLeftClick: () => {
          HMRouterMgr.pop()
        }
      })
```

![img](https://cdn.nlark.com/yuque/0/2025/png/8435673/1743471754302-ba1ae31f-1a2a-4000-a7cb-cf01fc9c5eaf.png)



## 1.5. 调高HDMNavBar的左侧和右侧图标层级

![img](https://cdn.nlark.com/yuque/0/2025/png/8435673/1743473085663-d5ce1b4a-8be6-45b2-a1ae-6b50fa1ce1ae.png)

## 1.6. 计数器组件

[counter](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V5/ts-container-counter-V5)

![img](https://cdn.nlark.com/yuque/0/2024/png/639379/1718127820382-a6e20afe-e0f0-414d-bff7-47017075c1c9.png)

**需求：**

1. 参考文档整合 counter 组件
2. 等于 1 禁用递减按钮
3. 点击-和+修改个数

- 显示弹层

```typescript
features/home/src/main/ets/views/GoodsView.ets

Button('加入购物袋')
    .buyButton($r('[basic].color.black'), true)
    .onClick(() => {
      this.showSheet = true
    })
  Button('立即购买')
    .buyButton($r('[basic].color.red'), false)
    .onClick(async () => {
      this.showSheet = true
    })
```

- 定义count变量

```typescript
features/home/src/main/ets/views/GoodsView.ets

@Local count: number = 1
```

- 放置Counter组件

```ts
  features/home/src/main/ets/views/GoodsView.ets

  Row({ space: 10 }) {
    // 计数器
    Counter() {
      Text(this.count.toString())
    }.enableDec(this.count > 1)
    .onInc(() => {
      this.count++
    })
    .onDec(() => {
      this.count--
    })

    Text(this.goods.inventory > 10000 ? '库存充足' : "库存紧张")
      .fontSize(12)
      .fontColor(this.goods.inventory > 10000 ? $r('[basic].color.gray') : $r('[basic].color.red'))
  }
```



## 1.7. sku功能

**V2 -可以给V1传数据，V2组件中可以使用V1组件**

**V1组件中可以使用V2组件，但是不能给V2传递数据**

在电商类项目中，SKU（Stock Keeping Unit，库存量单位）是一个核心功能，它是指商品的最小库存管理单位

**需求：**

1. 使用 sku 组件
2. 实现界面展示效果

1. 实现界面展示效果

![img](https://cdn.nlark.com/yuque/0/2024/png/639379/1718129118894-ebfffa9a-70bb-4724-926c-8bb767e52cf7.png)

**核心步骤：**

1. 确认弹框组件位置并整合 sku 组件
2. 获取 sku 数据并保存
3. 修改页面显示

```ts
  @Builder
  AddCartBuilder() {
    Column() {
      Text(`已选:${this.sku.specsText}`)
        .fontWeight(300)
        .width('100%')
        .fontColor($r('[basic].color.black'))
        .fontSize(14)
        .padding({ bottom: 10, right: 50 })
        .maxLines(1)
        .textOverflow({ overflow: TextOverflow.Ellipsis })
        .visibility(this.sku.id ? Visibility.Visible : Visibility.Hidden)
      Row({ space: 10 }) {
        Image(this.sku.picture || this.goods.mainPictures?.[0])
          .alt($r('app.media.ic_sku_img'))
          .width(80)
          .height(80)
          .backgroundColor($r('[basic].color.under'))
          .borderRadius(4)
        Column() {
          Row() {
            Text('现价¥')
              .fontSize(14)
              .fontColor($r('[basic].color.black'))
              .offset({ y: -4 })
            Text(this.sku.price || this.goods.price)
              .fontSize(24)
              .fontColor($r('[basic].color.black'))
              .fontWeight(500)
            Text('原价¥' + (this.sku.oldPrice || this.goods.price))
              .fontSize(12)
              .fontColor($r('[basic].color.gray'))
              .margin({ left: 10 })
              .offset({ y: -4 })
              .decoration({
                type: TextDecorationType.LineThrough,
                color: $r('[basic].color.gray')
              })
          }
          .alignItems(VerticalAlign.Bottom)

          Row({ space: 10 }) {
            // 计数器
            Counter() {
              Text(this.count.toString())
            }.enableDec(this.count > 1)
            .onInc(() => {
              this.count++
            })
            .onDec(() => {
              this.count--
            })

            Text(this.goods.inventory > 10000 ? '库存充足' : "库存紧张")
              .fontSize(12)
              .fontColor(this.goods.inventory > 10000 ? $r('[basic].color.gray') : $r('[basic].color.red'))
          }
        }
        .height(80)
        .justifyContent(FlexAlign.SpaceBetween)
        .alignItems(HorizontalAlign.Start)
      }
      .width('100%')

      Divider()
        .strokeWidth(4)
        .color($r('[basic].color.under'))
        .margin({ left: -8, right: -8, top: 13 })

      List() {
        ListItem() {
          // Sku 组件
          HDMSku({
            skus: this.goods.skus,
            specs: this.goods.specs,
            onSkuChange: (sku) => {
              this.sku = sku // 接收sku组件传递过来的规格商品
            }
          })
        }
      }
      .layoutWeight(1)
      .scrollBar(BarState.Off)

      Row() {
        Button(this.loading ? '加入中...' : '加入购物袋')
          .buyButton($r('[basic].color.black'), true)
          .onClick(() => {
            // 实现加入购物车

          })
        Button('立即购买')
          .buyButton($r('[basic].color.red'), false)
          .onClick(async () => {

          })
      }
      .width('100%')
    }
    .height(600)
    .padding({
      left: 16,
      right: 16,
      top: 16,
      bottom: this.safeArea.bottomHeight || 16
    })
  }
```

