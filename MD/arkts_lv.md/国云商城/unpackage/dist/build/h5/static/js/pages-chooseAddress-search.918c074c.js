(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chooseAddress-search"],{"12cb":function(t,e,i){"use strict";var a=i("3b68"),o=i.n(a);o.a},"3b68":function(t,e,i){var a=i("8587");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("693d0980",a,!0,{sourceMap:!1,shadowMode:!1})},"3ea8":function(t,e,i){"use strict";i.r(e);var a=i("68dc"),o=i("e383");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("12cb");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"4738f03e",null,!1,a["a"],r);e["default"]=c.exports},"5a64":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={qqmapWxKey:"QTQBZ-ZDXWF-YMCJM-NTTLD-S2QSV-HJF32"};e.default=a},"5bc3":function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function a(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}t.exports=a},"68dc":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"app"},[i("v-uni-view",{staticClass:"search-wrap"},[i("v-uni-view",{staticClass:"city",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo("cityList?city="+t.city)}}},[i("v-uni-image",{staticClass:"icon",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAC70lEQVRIS8VW7VXcMBDctQsAKshRQYRcAJcKIBUAFQAVhFSQowKggpAKuBTgRVcBRwWQAiTljZ/Ek235436hf3e2NTuzO7vL9EmHPwmXZgMrpRZlWZ4Q0dJ7v2TmfQTtvX9n5jURra21D8aY9zlkJoGVUvtFUVwS0VUEG7oYQRDRyjl3OxXAKLBSSpVleUdEKrDbENG9c84Q0TYEsCiKAs/Pmflr+M9Yay+MMXgvewaBAVoUxVNg+c9ae2qMgaSDp6qqUwRGRHtg75w7MsbEAFvfZYEhb1mWT2Dqvd8455ZT0sVbQ2rWgT2Yf8t9mwXWWt8w8w8iAtNF90NcHmVFYLnnZVmCKZj/FJGbrkw94BDxCyT23l+ICKRrTnj2i5nP04u898j7dRqA1ho5vwuSH3aD6wEnH2xEpCmqCBrlhxKwT3i0BDMi6smqtTZQpksA3/WAq6p6JKIT7/2tiFxFYK31ipkvvfd/nXMotMavQYVHZj4e+oaI/tR1jcL7ODnGKIzjUBQfVVxVFYD2rLUHAzl9g6wicpCotIRKCFZEoMwo8JaZv6TAoWu95C5IFIkBI5+NhZRSEbiVtqzUWuse42CvN+SxruujnJFjPlNFEuBZjBvgrg201j0lMpK+isgiUaGx5Vypo4cf6rr+sE3HHt9jFwOroih+5+xXVRWseJbzcs7HMS+tQgGLeFFOaiJqBRrejwWJ7tVqt0Odq5E15z8wD5OqGQjoXJhIaaPB/4lCLflj0KMt03u/FZHDAYajf8eamN0yky4Ve+21iKx2AZ/q9Vk7JRXZ9Fr8ttZivA3O1jSoMMOfQxpavX60gaQPk/a5DbN1dK0J7fOZmWGpXpucDTx3tibpmT3D5+xcWH9ghTiBeitNZ0XCDFdDm8doVXcLKVzcgIf5OtRAXsPkmqyHScZJW8S2GVca+LepdGZuRueuK9Js4CSPADxLVcEcds7dzN3LRu005ltskynjuq6xPOx0dmK8080TL38a8H+fVUE94KTW6AAAAABJRU5ErkJggg=="}}),i("v-uni-text",[t._v(t._s(t.city))]),i("v-uni-image",{staticClass:"c-icon",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAvElEQVQ4T+3TwQ3CMAwF0G9lAQbgwgRlhEgegBEQm3UEFrCUEWACLgzAAlaQpQa1EJxK9MChvaVKXp3vmrDwQwt7WMHfE31lGGPchBBuAM4icppDM3MP4KCqu5TSw85MmsLMFyLqcs59CzWMiI4556uI7EsBE3CoMrXQMaaqsVT3UaG9aKEeVgU9tIV9BWuo5V0ye7/muIHupJTrA+iICNYAD3MrLF8d0LutVXU7bkDt11pnec7A+Xv+P8Mn98h9FeV7S88AAAAASUVORK5CYII="}})],1),i("v-uni-input",{staticClass:"input",attrs:{maxlength:"30",focus:!0,"auto-focus":!0,placeholder:"请输入地址关键字搜索"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.bindConfirm.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.bindConfirm.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"addr-list"},t._l(t.list,(function(e,a){return i("v-uni-view",{key:a,staticClass:"addr-item b-b",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.confirm(e)}}},[i("v-uni-text",{staticClass:"title"},[t._v(t._s(e.title))]),i("v-uni-text",{staticClass:"addr"},[t._v(t._s(e.address))])],1)})),1)],1)},n=[]},8587:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-view[data-v-4738f03e]{-webkit-box-sizing:border-box;box-sizing:border-box}.app[data-v-4738f03e]{padding-top:%?100?%}.search-wrap[data-v-4738f03e]{position:fixed;left:0;top:var(--window-top);z-index:90;display:-webkit-box;display:-webkit-flex;display:flex;background-color:#fff;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%;height:%?100?%;padding:0 %?30?%;background-color:#fff}.search-wrap .city[data-v-4738f03e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?30?%;color:#333}.search-wrap .icon[data-v-4738f03e]{width:%?34?%;height:%?34?%;margin-right:%?4?%}.search-wrap .c-icon[data-v-4738f03e]{width:%?22?%;height:%?22?%;margin-left:%?4?%}.search-wrap .input[data-v-4738f03e]{-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?16?%;padding:0 %?28?%;height:%?70?%;line-height:%?70?%;font-size:%?30?%;color:#333;background-color:#f5f5f5;-webkit-border-radius:%?100?%;border-radius:%?100?%}.addr-list[data-v-4738f03e]{background-color:#fff}.addr-list .addr-item[data-v-4738f03e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:%?24?% %?30?%;position:relative}.addr-list .addr-item[data-v-4738f03e]:after{position:absolute;z-index:3;left:0;top:auto;bottom:0;right:0;height:0;content:"";-webkit-transform:scaleY(.5);transform:scaleY(.5);border-bottom:1px solid #e5e5e5}.addr-list .left[data-v-4738f03e]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding-right:%?50?%}.addr-list .title[data-v-4738f03e]{font-size:%?28?%;color:#303133}.addr-list .addr[data-v-4738f03e]{margin-top:%?10?%;font-size:%?24?%;color:#909399;line-height:1.4}',""]),t.exports=e},"8b1c":function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a(i("5a64"));var o=i("d127"),n=(new o({key:"CWVBZ-IPLHI-JPFGP-53TJM-566NH-M2BNK"}),{data:function(){return{city:"",keyword:"",list:[]}},onLoad:function(t){uni.setNavigationBarTitle({title:"搜索地址"}),this.city=t.city||""},methods:{confirm:function(t){uni.setStorageSync("location",t.location),uni.navigateBack({})},searchList:function(){var t=this;uni.request({method:"GET",url:"http://121.5.53.212:3000/suggestion",data:{keyword:this.keyword,policy:1,page_size:20,page_index:1,region:this.city||"全国",key:"QTQBZ-ZDXWF-YMCJM-NTTLD-S2QSV-HJF32"},success:function(e){console.log(e),t.list=e.data.data}})},bindConfirm:function(t){this.keyword=t.detail.value,this.searchList()}}});e.default=n},"970b":function(t,e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=i},d127:function(t,e,i){i("4de4"),i("ac1f"),i("1276");var a=i("970b"),o=i("5bc3"),n={KEY_ERR:311,KEY_ERR_MSG:"key格式错误",PARAM_ERR:310,PARAM_ERR_MSG:"请求参数信息有误",SYSTEM_ERR:600,SYSTEM_ERR_MSG:"系统错误",WX_ERR_CODE:1e3,WX_OK_CODE:200},r="https://apis.map.qq.com/ws/",s=r+"place/v1/search",c=r+"place/v1/suggestion",l=r+"geocoder/v1/",u=r+"district/v1/list",d=r+"district/v1/getchildren",f=r+"distance/v1/",p={location2query:function(t){if("string"==typeof t)return t;for(var e="",i=0;i<t.length;i++){var a=t[i];e&&(e+=";"),a.location&&(e=e+a.location.lat+","+a.location.lng),a.latitude&&a.longitude&&(e=e+a.latitude+","+a.longitude)}return e},getWXLocation:function(t,e,i){wx.getLocation({type:"gcj02",success:t,fail:e,complete:i})},getLocationParam:function(t){if("string"==typeof t){var e=t.split(",");t=2===e.length?{latitude:t.split(",")[0],longitude:t.split(",")[1]}:{}}return t},polyfillParam:function(t){t.success=t.success||function(){},t.fail=t.fail||function(){},t.complete=t.complete||function(){}},checkParamKeyEmpty:function(t,e){if(!t[e]){var i=this.buildErrorConfig(n.PARAM_ERR,n.PARAM_ERR_MSG+e+"参数格式有误");return t.fail(i),t.complete(i),!0}return!1},checkKeyword:function(t){return!this.checkParamKeyEmpty(t,"keyword")},checkLocation:function(t){var e=this.getLocationParam(t.location);if(!e||!e.latitude||!e.longitude){var i=this.buildErrorConfig(n.PARAM_ERR,n.PARAM_ERR_MSG+" location参数格式有误");return t.fail(i),t.complete(i),!1}return!0},buildErrorConfig:function(t,e){return{status:t,message:e}},buildWxRequestConfig:function(t,e){var i=this;return e.header={"content-type":"application/json"},e.method="GET",e.success=function(e){var i=e.data;0===i.status?t.success(i):t.fail(i)},e.fail=function(e){e.statusCode=n.WX_ERR_CODE,t.fail(i.buildErrorConfig(n.WX_ERR_CODE,result.errMsg))},e.complete=function(e){var a=+e.statusCode;switch(a){case n.WX_ERR_CODE:t.complete(i.buildErrorConfig(n.WX_ERR_CODE,e.errMsg));break;case n.WX_OK_CODE:var o=e.data;0===o.status?t.complete(o):t.complete(i.buildErrorConfig(o.status,o.message));break;default:t.complete(i.buildErrorConfig(n.SYSTEM_ERR,n.SYSTEM_ERR_MSG))}},e},locationProcess:function(t,e,i,a){var o=this;if(i=i||function(e){e.statusCode=n.WX_ERR_CODE,t.fail(o.buildErrorConfig(n.WX_ERR_CODE,e.errMsg))},a=a||function(e){e.statusCode==n.WX_ERR_CODE&&t.complete(o.buildErrorConfig(n.WX_ERR_CODE,e.errMsg))},t.location){if(o.checkLocation(t)){var r=p.getLocationParam(t.location);e(r)}}else o.getWXLocation(e,i,a)}},g=function(){"use strict";function t(e){if(a(this,t),!e.key)throw Error("key值不能为空");this.key=e.key}return o(t,[{key:"search",value:function(t){var e=this;if(t=t||{},p.polyfillParam(t),p.checkKeyword(t)){var i={keyword:t.keyword,orderby:t.orderby||"_distance",page_size:t.page_size||10,page_index:t.page_index||1,output:"json",key:e.key};t.address_format&&(i.address_format=t.address_format),t.filter&&(i.filter=t.filter);var a=t.distance||"1000",o=t.auto_extend||1,n=function(e){i.boundary="nearby("+e.latitude+","+e.longitude+","+a+","+o+")",wx.request(p.buildWxRequestConfig(t,{url:s,data:i}))};p.locationProcess(t,n)}}},{key:"getSuggestion",value:function(t){var e=this;if(t=t||{},p.polyfillParam(t),p.checkKeyword(t)){var i={keyword:t.keyword,region:t.region||"全国",region_fix:t.region_fix||0,policy:t.policy||0,output:"json",key:e.key};wx.request(p.buildWxRequestConfig(t,{url:c,data:i}))}}},{key:"reverseGeocoder",value:function(t){var e=this;t=t||{},p.polyfillParam(t);var i={coord_type:t.coord_type||5,get_poi:t.get_poi||0,output:"json",key:e.key};t.poi_options&&(i.poi_options=t.poi_options);var a=function(e){i.location=e.latitude+","+e.longitude,wx.request(p.buildWxRequestConfig(t,{url:l,data:i}))};p.locationProcess(t,a)}},{key:"geocoder",value:function(t){var e=this;if(t=t||{},p.polyfillParam(t),!p.checkParamKeyEmpty(t,"address")){var i={address:t.address,output:"json",key:e.key};wx.request(p.buildWxRequestConfig(t,{url:l,data:i}))}}},{key:"getCityList",value:function(t){var e=this;t=t||{},p.polyfillParam(t);var i={output:"json",key:e.key};wx.request(p.buildWxRequestConfig(t,{url:u,data:i}))}},{key:"getDistrictByCityId",value:function(t){var e=this;if(t=t||{},p.polyfillParam(t),!p.checkParamKeyEmpty(t,"id")){var i={id:t.id||"",output:"json",key:e.key};wx.request(p.buildWxRequestConfig(t,{url:d,data:i}))}}},{key:"calculateDistance",value:function(t){var e=this;if(t=t||{},p.polyfillParam(t),!p.checkParamKeyEmpty(t,"to")){var i={mode:t.mode||"walking",to:p.location2query(t.to),output:"json",key:e.key},a=function(e){i.from=e.latitude+","+e.longitude,wx.request(p.buildWxRequestConfig(t,{url:f,data:i}))};t.from&&(t.location=t.from),p.locationProcess(t,a)}}}]),t}();t.exports=g},e383:function(t,e,i){"use strict";i.r(e);var a=i("8b1c"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a}}]);